{% extends 'layouts/page.njk' %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/tag/macro.njk" import govukTag %}
{% from "govuk/components/service-navigation/macro.njk" import govukServiceNavigation %}
{% from "../../common/components/tasksTab/macro.njk" import appTasksTab %}
{% from "../../common/components/caseSummary/macro.njk" import appCaseSummary %}
{% from "../../common/components/caseDetailsTabNavigation/macro.njk" import appCaseDetailsTabNavigation %}

{% block content %}
  {{ appCaseSummary({caseData: caseData}) }}

  {{ appCaseDetailsTabNavigation({active: 'tasks', caseDataId: caseData._id, taskGroupId: query.groupId}) }}

  {% if error %}
    <div
      class="govuk-error-summary govuk-!-margin-top-4 govuk-!-margin-bottom-4"
      data-module="govuk-error-summary"
      data-govuk-error-summary-init=""
    >
      <div role="alert">
        <h2 class="govuk-error-summary__title">There is a problem</h2>
        <div class="govuk-error-summary__body">
          <ul class="govuk-list govuk-error-summary__list">
            <li>
              <a href="#tasks">{{ error.message }}</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  {% endif %}

  {{ appTasksTab({caseId: caseData._id, stage: stage, groupId: query.groupId, taskId: query.taskId, currentTask: currentTask}) }}
{% endblock %}

{% block bodyEnd %}
  {{ super() }}
{% endblock %}
