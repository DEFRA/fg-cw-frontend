{% from "govuk/components/tag/macro.njk" import govukTag %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% set caseId = params._id or params.caseId %}
{% set banner = params.banner %}
{% set bannerTitle = banner.title.value or banner.title.text %}
{% set callToAction = banner.callToAction %}
{% set summary = banner.summary %}

<div class="app-case-banner">
  <div class="govuk-width-container">
    <div class="app-case-banner__top govuk-!-margin-bottom-4">
      <div class="app-case-banner__title">
        <a href="/cases" class="govuk-back-link">Back to applications</a>
        <h1 class="govuk-heading-m govuk-!-margin-bottom-0">
          {{ bannerTitle }}
        </h1>
      </div>
      {% if callToAction and callToAction.length > 0 %}
        <div class="app-case-banner__actions">
          {% for action in callToAction %}
            <form
              method="POST"
              action="/cases/{{ caseId }}/page-action"
              style="display: inline-block; margin: 0;"
            >
              <input
                type="hidden"
                name="actionCode"
                value="{{ action.code }}"
              />
              <input
                type="hidden"
                name="actionName"
                value="{{ action.name }}"
              />
              <button
                type="submit"
                class="govuk-button govuk-button--primary govuk-!-margin-bottom-0"
                data-module="govuk-button"
                data-prevent-double-click="true"
              >
                {{ action.name }}
              </button>
            </form>
          {% endfor %}
        </div>
      {% endif %}
    </div>
    <div>
      <div class="app-case-row">
        {% if summary %}
          {% for key, field in summary %}
            <div class="app-case-cell">
              <p>
                <strong class="govuk-!-margin-right-1"
                  >{{ field.label }}:</strong
                >
                {{ field.text }}
              </p>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>
</div>
