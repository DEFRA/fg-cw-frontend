{% from "govuk/components/tag/macro.njk" import govukTag %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% set caseId = params._id or params.caseId %}
{% set banner = params.banner %}
{% set bannerTitle = banner.title.value or banner.title.text %}
{% set callToAction = banner.callToAction %}
{% set summary = banner.summary %}

<div class="govuk-!-margin-bottom-6 app-case-banner">
  <div class="govuk-width-container">
    <a href="/cases" class="govuk-back-link">Back to cases</a>
    <div class="moj-page-header-actions">
      <div class="moj-page-header-actions__title">
        <h1 class="govuk-heading-m govuk-!-margin-bottom-0">
          {{ bannerTitle }}
        </h1>
      </div>
      {% if callToAction and callToAction.length > 0 %}
        <div class="moj-page-header-actions__actions">
          <div class="moj-button-group moj-button-group--inline">
            {% for action in callToAction %}
              <form
                method="POST"
                action="/cases/{{ caseId }}/page-action"
                style="display: inline-block; margin: 0;"
              >
                <input
                  type="hidden"
                  name="actionCode"
                  value="{{ action.code }}"
                />
                <input
                  type="hidden"
                  name="actionName"
                  value="{{ action.name }}"
                />
                <button
                  type="submit"
                  class="govuk-button govuk-button--primary"
                  data-module="govuk-button"
                  data-prevent-double-click="true"
                >
                  {{ action.name }}
                </button>
              </form>
            {% endfor %}
          </div>
        </div>
      {% endif %}
    </div>
    <div>
      <div class="app-case-row">
        {% if summary %}
          {% for key, field in summary %}
            <div class="app-case-cell">
              <p>
                <strong class="govuk-!-margin-right-1"
                  >{{ field.label }}:</strong
                >
                {{ field.text }}
              </p>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>
</div>
