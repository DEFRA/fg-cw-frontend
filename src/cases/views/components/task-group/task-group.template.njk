{% from "govuk/components/tag/macro.njk" import govukTag %}
{% from "../task-list/macro.njk" import taskList %}
{% from "../stage-actions/macro.njk" import stageActions %}
{% from "../../partials/stage-action-button-group/macro.njk" import stageActionButtonGroup %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h2 class="govuk-heading-l" data-testid="stage-heading">
      {{ params.stage.name }}
    </h2>
    {% for taskGroup in params.stage.taskGroups %}
      <h3 class="govuk-heading-m">{{ taskGroup.name }}</h3>
      {{ taskList({tasks: taskGroup.tasks}) }}
    {% endfor %}

    {% if params.stage.actions.items.length > 0 %}
      {{ stageActions({ caseId: params.caseId, stage: params.stage }) }}
    {% endif %}
  </div>
</div>
