{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "./heading.njk" import defraHeading %}

{% macro defraList(params, renderDefraComponent) %}
  {%- set fields = params.fields or [] %}

  {% set summaryRows = [] %}
  {% for field in fields %}
    {%
      set row = {
        key: { text: field.label },
        value: { html: renderDefraComponent(field) }
      }
    %}
    {% set summaryRows = (summaryRows.push(row), summaryRows) %}
  {% endfor %}

   {% if params.title %}
     {{ defraHeading({ text: params.title, level: 3 }) }}
   {% endif %}
   {{ govukSummaryList({ rows: summaryRows }) }}
{% endmacro %}
