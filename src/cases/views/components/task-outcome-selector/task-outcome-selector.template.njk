{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}

{%- set status = params.status -%}
{%- set statusOptions = params.statusOptions -%}
{%- set completed = params.completed -%}
{%- set errorMessage = params.errorMessage -%}

{% if statusOptions and statusOptions.length > 0 %}
  {% set radioItems = [] %}
  {% for option in statusOptions %}
    {%
      set radioItems = (radioItems.push({
        value: option.code,
        text: option.name,
        checked: option.code === status
      }), radioItems)
    %}
  {% endfor %}

  {{
    govukRadios({
      name: "status",
      fieldset: {
        legend: {
          text: "Select outcome",
          classes: "govuk-fieldset__legend--m"
        }
      },
      items: radioItems,
      errorMessage: errorMessage
    })
  }}
{% else %}
  {{
    govukCheckboxes({
      name: "completed",
      items: [
        {
          value: true,
          id: "task-completed",
          text: "Completed",
          checked: completed
        }
      ]
    })
  }}
{% endif %}
