{% extends '../layouts/case-layout.njk' %}
{% from "../components/case-summary/macro.njk" import caseSummary %}
{% from "../components/case-details-tab-navigation/macro.njk" import caseDetailsTabNavigation %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/textarea/macro.njk" import govukTextarea %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}

{% block content %}
  {{ caseSummary(data) }}

  {% if errors %}
    {{
      govukErrorSummary({
        titleText: "There is a problem",
        errorList: [
          {
            text: "You must enter a note",
            href: "#text"
          }
        ]
      })
    }}
  {% endif %}

  <div class="govuk-body">
    {{ caseDetailsTabNavigation({active: 'notes', caseId: data.caseId }) }}

    <form action="/cases/{{ data.caseId }}/notes" method="post">
      <input type="hidden" name="type" value="NOTE_ADDED" />

      {{
        govukTextarea({
          name: "text",
          id: "text",
          label: {
            text: "Add a note",
            classes: "govuk-label govuk-label--l govuk-!-margin-top-6",
            isPageHeading: yes
          },
          hint: {
            text: "All notes will be saved for auditing purposes"
          },
          errorMessage: errors.text
        })
      }}

      {{
        govukButton({
          text: 'Save'
        })
      }}
    </form>
  </div>
{% endblock %}
