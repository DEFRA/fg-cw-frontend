{% from "govuk/components/table/macro.njk" import govukTable %}

{% if params.fields %}
  {% set rows = [] %}
  {% for field in params.fields %}
    {# Use the resolved value from the processed field #}
    {% set fieldValue = field.value %}

    {# Handle different field types #}
    {% if field.type == "boolean" %}
      {% set displayValue = "Yes" if fieldValue else "No" %}
    {% else %}
      {% set displayValue = fieldValue %}
    {% endif %}

    {%
      set rows = (rows.push([
        { text: field.label, classes: "govuk-!-width-one-third" },
        { text: displayValue }
      ]), rows)
    %}
  {% endfor %}

  {{
    govukTable({
      firstCellIsHeader: true,
      rows: rows
    })
  }}
{% endif %}
