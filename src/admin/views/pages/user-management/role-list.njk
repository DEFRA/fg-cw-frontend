{% extends "layouts/case-layout.njk" %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% block contentMain %}
  <h1 class="govuk-heading-l">{{ pageHeading }}</h1>

  {{
    govukButton({
      text: "Create new role",
      href: data.createRoleHref
    })
  }}

  {% if data.roles.rows.length > 0 %}
    {% set rows = [] %}
    {% for row in data.roles.rows %}
      {% set codeHtml %}
        <a class="govuk-link" href="{{ row.code.href }}">{{ row.code.text }}</a>
      {% endset %}

      {%
        set tableRow = [
          { html: codeHtml },
          { text: row.description },
          { text: row.assignable }
        ]
      %}
      {% set rows = (rows.push(tableRow), rows) %}
    {% endfor %}

    {{
      govukTable({
        head: data.roles.head,
        rows: rows,
        firstCellIsHeader: true
      })
    }}
  {% else %}
    <p class="govuk-body">There are no roles.</p>
  {% endif %}
{% endblock %}
